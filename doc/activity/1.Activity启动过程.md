Android activity启动过程
====

## Launcher中点击条目

1.点击图标

```java
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    Intent intent = intentForPosition(position);
    startActivity(intent);
}
```

2.开始start

```java
@Override
public void startActivity(Intent intent, @Nullable Bundle options) {
    getAutofillClientController().onStartActivity(intent, mIntent);
    if (options != null) {
        startActivityForResult(intent, -1, options);
    } else {
        // Note we want to go through this call for compatibility with
        // applications that may have overridden the method.
        startActivityForResult(intent, -1);
    }
}

```

3.service

```java
  int result = ActivityTaskManager.getService().startActivity(whoThread,
                    who.getOpPackageName(), who.getAttributionTag(), intent,
                    intent.resolveTypeIfNeeded(who.getContentResolver()), token,
                    target != null ? target.mEmbeddedID : null, requestCode, 0, null, options);
            notifyStartActivityResult(result, options);
            checkStartActivityResult(result, intent);
```

4.调用ActivityManager的startActivity

```java
public void startActivity(Context context, Intent intent, Bundle options) {
    ActivityThread thread = ActivityThread.currentActivityThread();
    thread.getInstrumentation().execStartActivityFromAppTask(context,
            thread.getApplicationThread(), mAppTaskImpl, intent, options);
}
```
启动方式有两种：

- Launcher：也是掉用了内部的startAcitivity
- 内部startActivity;

一般的启动包括冷启动和热启动

- 冷启动：点击桌面图标，手机系统不存在，先fork Applicaiton 并启动Acitivity
- 热启动：仅仅将应用程序带到前台


## 启动

```java
@Override
public void startActivity(Intent intent) {
    this.startActivity(intent, null);
}
```